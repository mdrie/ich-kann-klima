var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,r)=>{for(var o in r||(r={}))t.call(r,o)&&s(e,o,r[o]);if(n)for(var o of n(r))a.call(r,o)&&s(e,o,r[o]);return e};import{d as o,c as l,a as c,F as i,o as u,r as d,b as p,w as m,p as h,e as v,f,g,t as b,h as w,i as y,j as L,k,v as I,l as E,u as S,m as G}from"./vendor.53b9bbe8.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const o=new URL(e,a);if(self[t].moduleMap[o])return n(self[t].moduleMap[o]);const l=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){r(new Error(`Failed to import: ${e}`)),s(c)},onload(){n(self[t].moduleMap[o]),s(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/assets/");var _=o({});const C=c("h1",null,"#ich-kann-klima",-1);_.render=function(e,t,n,a,s,r){const o=d("router-view");return u(),l(i,null,[C,c(o)],64)};const D={gameLoaded(e,t){e.game=t.game}};var O=o({props:{value:{type:Number,required:!0},color:{type:String,required:!0}},computed:{emptyCircles(){return 10-this.value},filledCircles(){return this.value},style(){return e=>("filled"===e?"background":"border-color")+": "+this.color}}});const Y=m();h("data-v-72f6494f");const z={class:"Indicator"};v();const M=Y(((e,t,n,a,s,r)=>(u(),l("div",z,[(u(!0),l(i,null,p(e.emptyCircles,(t=>(u(),l("div",{class:"circle",style:e.style("empty")},null,4)))),256)),(u(!0),l(i,null,p(e.value,(t=>(u(),l("div",{class:"circle",style:e.style("filled")},null,4)))),256))]))));O.render=M,O.__scopeId="data-v-72f6494f";var j=o({setup(){const e=Ae();return{store:e,currentYear:f((()=>{var t;return null==(t=e.state.game)?void 0:t.currentYear}))}},computed:{timespan:()=>29,years(){return this.currentYear-2020},height(){return"height: "+this.years/this.timespan*100+"%"}}});const P=m();h("data-v-ad8363c2");const $={class:"container"},A=c("div",{class:"arrow-head"},null,-1);v();const B=P(((e,t,n,a,s,r)=>(u(),l("div",$,[A,c("div",{class:"indicator",style:e.height},null,4)]))));j.render=B,j.__scopeId="data-v-ad8363c2";const K={co2budget:5e3,stateDebt:1899,popularity:50,co2emissions:805,unemployment:2695,gdp:3332,electricityDemand:2300};var R=o({components:{TimeIndicator:j,Indicator:O},setup:()=>({store:Ae()}),computed:{co2value(){const e=this.store.state.game;return e?Math.round(function(e){if(0===e.values.co2emissions)return 100;const t=.15*e.values.co2budget/e.values.co2emissions;return Math.max(0,Math.min(100,50*t))}(e)/10):0},financeValue:()=>5,popularityValue:()=>5}});const U=m();h("data-v-325749cb");const F={class:"CurrentIndicators"};v();const J=U(((e,t,n,a,s,r)=>{const o=d("Indicator"),i=d("TimeIndicator");return u(),l("div",F,[c(o,{value:e.co2value,color:"#EE8AC1"},null,8,["value"]),c(o,{value:e.financeValue,color:"#A9D18E"},null,8,["value"]),c(o,{value:e.popularityValue,color:"#8FAADC"},null,8,["value"]),c(i)])}));R.render=J,R.__scopeId="data-v-325749cb";var V=o({components:{CurrentIndicators:R}});const W={class:"game-setup"},x={class:"wrapper"};V.render=function(e,t,n,a,s,r){const o=d("CurrentIndicators");return u(),l("div",W,[c("div",x,[g(e.$slots,"default")]),c(o)])};var N=o({setup(){const e=Ae();return{store:e,allLaws:f((()=>e.state.allLaws)),acceptedLaws:f((()=>{var t;return null==(t=e.state.game)?void 0:t.acceptedLaws}))}},data:()=>({opened:void 0}),computed:{accepted(){return this.allLaws.filter((e=>{var t;return null==(t=this.acceptedLaws)?void 0:t.some((t=>t.lawId===e.id))}))}},methods:{toggleOpen(e){this.opened=this.opened===e?void 0:e}}});const q=m()(((e,t,n,a,s,r)=>(u(!0),l(i,null,p(e.accepted,((t,n)=>(u(),l("div",{key:n,class:["Law",{opened:n===e.opened}],onClick:t=>e.toggleOpen(n)},[c("h3",null,b(t.title),1),c("div",null,b(t.description),1)],10,["onClick"])))),128))));N.render=q,N.__scopeId="data-v-87402bbe";var T=o({setup(){const e=Ae();return{store:e,allLaws:f((()=>e.state.allLaws)),acceptedLaws:f((()=>{var t;return null==(t=e.state.game)?void 0:t.acceptedLaws}))}},data:()=>({declined:[]}),computed:{proposed(){return this.allLaws.filter((e=>{var t;return!(null==(t=this.acceptedLaws)?void 0:t.some((t=>t.lawId===e.id)))&&!this.declined.includes(e.id)})).slice(0,6)}},methods:{accept(e){this.store.dispatch(Oe(e))},decline(e){this.declined.push(e)}}});const Z=m();h("data-v-54f052e4");const H={class:"ProposedLaws"},Q={class:"button-bar"};v();const X=Z(((e,t,n,a,s,r)=>(u(),l("div",H,[(u(!0),l(i,null,p(e.proposed,((t,n)=>(u(),l("div",{key:n,class:"Law"},[c("h3",null,b(t.title),1),c("div",null,b(t.description),1),c("div",Q,[c("button",{class:"accept",onClick:n=>e.accept(t.id)},"✓",8,["onClick"]),c("button",{class:"decline",onClick:n=>e.decline(t.id)},"✗",8,["onClick"])])])))),128))]))));T.render=X,T.__scopeId="data-v-54f052e4";var ee=o({components:{GameSetup:V,LawProposals:T,AcceptedLaws:N},setup:()=>({store:Ae()}),methods:{advanceYear(){this.$store.dispatch(Ye())}}});const te=m();h("data-v-30db5640");const ne=c("h2",null,"Beschlossene Gesetze",-1),ae=c("p",null,"Wenn Du fertig bist, wechsle zum nächsten Jahr und sieh' Dir die Auswirkungen an.",-1),se={class:"button-bar"};v();const re=te(((e,t,n,a,s,r)=>{const o=d("LawProposals"),i=d("AcceptedLaws"),p=d("GameSetup");return u(),l(p,null,{default:te((()=>[c(o),ne,c(i),ae,c("div",se,[c("button",{onClick:t[1]||(t[1]=(...t)=>e.advanceYear&&e.advanceYear(...t))},"Jahr abschließen")])])),_:1})}));ee.render=re,ee.__scopeId="data-v-30db5640";var oe=o({components:{GameSetup:V},methods:{newGame(){this.$router.push("/games")}}});const le=c("h2",null,"Deine erste Entscheidung steht bevor...",-1),ce=c("p",null,[y("Wähle weise, denn "),c("u",null,"alles hat Einfluss"),y(" auf deine Beliebtheit, das Klimaziel sowie den Finanzhaushalt.")],-1),ie=c("p",null,[y(" Durch manche Entscheidungen entstehen neue Möglichkeiten."),c("br"),y(" Es kann aber auch sein, dass du dir durch bestimmte Entscheidungen andere Möglichkeiten nimmst. ")],-1),ue=y(" Gar nicht so einfach, Politiker zu sein, oder? "),de={class:"button-bar"};oe.render=function(e,t,n,a,s,r){const o=d("o"),i=d("GameSetup");return u(),l(i,null,{default:w((()=>[le,ce,ie,c(o,null,{default:w((()=>[ue])),_:1}),c("div",de,[c("button",{onClick:t[1]||(t[1]=(...t)=>e.newGame&&e.newGame(...t))},"Leg' los")])])),_:1})};var pe=o({methods:{start(){this.$router.push("/start")}}});const me={class:"wrapper"},he=c("h2",null,"Stell dir vor...",-1),ve=c("h3",null,"... du bist Politiker.",-1),fe=c("p",null," Du wurdest gerade ins Amt gewählt. Dein Ziel? Die Wiederwahl! ",-1),ge=c("p",null," Du hast vier Jahre Zeit um... ",-1),be=c("ul",null,[c("li",null,"Beliebtheit in der Bevölkerung zu erlangen"),c("li",null,"der Klimakatastrophe entgegenzusteuern"),c("li",null,"das Soll des Bundeshaushaltes zu erreichen/nicht zu übersteigen")],-1),we={class:"button-bar"};pe.render=function(e,t,n,a,s,r){return u(),l("div",me,[he,ve,fe,ge,be,c("div",we,[c("button",{onClick:t[1]||(t[1]=(...t)=>e.start&&e.start(...t))},"Starte das Spiel!")])])};const ye=[{path:"/",component:pe},{path:"/start",component:oe},{path:"/games",component:ee,beforeEnter:()=>$e.dispatch(Ce())},{path:"/games/:id",component:ee,beforeEnter:e=>$e.dispatch(De(e.params.id))}],Le=L({history:k(),routes:ye});let ke=0;function Ie(e){return r(r({},e),{id:""+ ++ke})}const Ee=[Ie({title:"Kohleverstromung einstellen",description:"Die Verstromung von Kohle zur Erzeugung von Strom wird verboten.",effects(e,t,n){const a=n-t;return{co2emmissions:-200,stateDebt:-(a<18?0:1e3),unemployment:Math.max(50*(10-a)/10,0)}}}),Ie({title:"Energiemix regelt der Markt",description:"Subventionen in der Energiewirtschaft werden insgesamt eingestellt.",effects:(e,t,n)=>({co2emmissions:-100,stateDebt:-1e3})}),Ie({title:"Kernenergienutzung verlängern",description:"Eigentlich bereits abgeschaltete Kernkraftwerke wieder in Betrieb nehmen und neue bauen.",effects:(e,t,n)=>({co2emmissions:-100,stateDebt:1e3})}),Ie({title:"Windkraft fördern",description:"Garantierte Einspeisevergütung für neue und erneuterte Windanlagen",effects:(e,t,n)=>({co2emmissions:-100,stateDebt:-1e3})})],Se={loadGame(e){const t=localStorage.getItem("game");if(!t)throw Error("Game not found");return JSON.parse(t)},saveGame(e){localStorage.setItem("game",JSON.stringify(e))}};function Ge(e){return Se.saveGame(e),(e=>Pe("gameLoaded",{game:e}))(e)}const _e={startGame(){const e={id:I(),currentYear:2021,values:r({},K),acceptedLaws:[]};Se.saveGame(e),Le.push("/games/"+e.id)},loadGame(e,t){e.commit(Ge(Se.loadGame(t.gameId)))},acceptLaw(e,t){const n=e.state.game,a={lawId:t.lawId,effectiveSince:n.currentYear+1};e.commit(Ge(r(r({},n),{acceptedLaws:[...n.acceptedLaws,a]})))},advanceYear(e){const t=e.state.game,n=t.acceptedLaws.map((function(e){const t=Ee.find((t=>t.id===e.lawId));if(t)return r(r({},t),{effectiveSince:e.effectiveSince});throw Error(`Law #${e.lawId} not found`)})),a=function(e,t,n){const a=r({},e);return t.forEach((t=>{const s=t.effects(e,t.effectiveSince,n);Object.keys(s).forEach((e=>{a[e]+=s[e]||0}))})),a.co2budget-=a.co2emissions,a}(t.values,n,t.currentYear+1);e.commit(Ge(r(r({},t),{values:a,currentYear:t.currentYear+1})))}},Ce=()=>je("startGame",{}),De=e=>je("loadGame",{gameId:e}),Oe=e=>je("acceptLaw",{lawId:e}),Ye=()=>je("advanceYear",{}),ze={allLaws:Ee,game:void 0},Me=Symbol(),je=(e,t)=>r({type:e},t),Pe=(e,t)=>r({type:e},t),$e=E({state:ze,mutations:D,actions:_e});function Ae(){return S(Me)}const Be=G(_);Be.use($e,Me),Be.use(Le),Be.mount("#app");
