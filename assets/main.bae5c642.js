var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,r)=>{for(var i in r||(r={}))t.call(r,i)&&s(e,i,r[i]);if(n)for(var i of n(r))a.call(r,i)&&s(e,i,r[i]);return e};import{d as i,c as o,a as l,F as c,o as u,r as d,b as m,w as p,p as h,e as v,f as g,g as f,t as b,h as w,i as y,j as L,k,v as C,l as I,u as E,m as _}from"./vendor.53b9bbe8.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const i=new URL(e,a);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const o=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){r(new Error(`Failed to import: ${e}`)),s(l)},onload(){n(self[t].moduleMap[i]),s(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/assets/");var S=i({});const G=l("h1",null,"#ich-kann-klima",-1),D=l("details",{class:"attribution"},[l("summary",null,"Attribution"),l("ul",null,[l("li",null,"CO2 symbol: Tommaso.sansone91, CC0 1.0, via Wikimedia commons"),l("li",null,"Euro coin: Verdy_p, Public domain, via Wikimedia commons"),l("li",null,"Clapping hands: pngimg.com, CC 4.0 BY-NC")])],-1);S.render=function(e,t,n,a,s,r){const i=d("router-view");return u(),o(c,null,[G,l(i),D],64)};const O={gameLoaded(e,t){e.game=t.game}};var Y=i({props:{value:{type:Number,required:!0},color:{type:String,required:!0},img:{type:String}},computed:{emptyCircles(){return 10-this.value},filledCircles(){return this.value},style(){return e=>"empty"===e?"border-color: "+this.color:this.$props.img?"background-image: url("+this.$props.img+")":"background: "+this.color}}});const z=p();h("data-v-bff676d6");const M={class:"Indicator"};v();const j=z(((e,t,n,a,s,r)=>(u(),o("div",M,[(u(!0),o(c,null,m(e.emptyCircles,(t=>(u(),o("div",{class:"circle",style:e.style("empty")},null,4)))),256)),(u(!0),o(c,null,m(e.value,(t=>(u(),o("div",{class:"circle",style:e.style("filled")},null,4)))),256))]))));Y.render=j,Y.__scopeId="data-v-bff676d6";var $=i({setup(){const e=Ue();return{store:e,currentYear:g((()=>{var t;return null==(t=e.state.game)?void 0:t.currentYear}))}},computed:{timespan:()=>29,years(){return this.currentYear-2020},height(){return"height: "+this.years/this.timespan*100+"%"}}});const P=p();h("data-v-ad8363c2");const A={class:"container"},B=l("div",{class:"arrow-head"},null,-1);v();const W=P(((e,t,n,a,s,r)=>(u(),o("div",A,[B,l("div",{class:"indicator",style:e.height},null,4)]))));$.render=W,$.__scopeId="data-v-ad8363c2";const K={co2budget:5e3,stateDebt:1899,popularity:50,co2emissions:805,unemployment:2695,gdp:3332,electricityDemand:2300};function R(e){return Math.max(0,Math.min(100,e))}function U(e){if(0===e.values.co2emissions)return 100;return R(50*(.15*e.values.co2budget/e.values.co2emissions))}function V(e){return R(100-50*(e.values.stateDebt/K.stateDebt))}function x(e,t){return e?Math.round(t(e)/10):0}var F=i({components:{TimeIndicator:$,Indicator:Y},setup:()=>({store:Ue(),coin:"/assets/euro.4b74462e.svg",hands:"/assets/clapping-hands.2a0f82d4.png"}),computed:{game(){return this.store.state.game},co2value(){return x(this.game,U)},financeValue(){return x(this.game,V)},popularityValue(){return x(this.game,(e=>e.values.popularity))}}});const J=p();h("data-v-692d4862");const N={class:"CurrentIndicators"};v();const T=J(((e,t,n,a,s,r)=>{const i=d("Indicator"),c=d("TimeIndicator");return u(),o("div",N,[l(i,{value:e.co2value,color:"#EE8AC1",img:"https://upload.wikimedia.org/wikipedia/commons/2/26/Co2_carbon_dioxide_icon.png"},null,8,["value"]),l(i,{value:e.financeValue,color:"#A9D18E",img:e.coin},null,8,["value","img"]),l(i,{value:e.popularityValue,color:"#8FAADC",img:e.hands},null,8,["value","img"]),l(c)])}));F.render=T,F.__scopeId="data-v-692d4862";var q=i({components:{CurrentIndicators:F}});const Z={class:"game-setup"},H={class:"wrapper"};q.render=function(e,t,n,a,s,r){const i=d("CurrentIndicators");return u(),o("div",Z,[l("div",H,[f(e.$slots,"default")]),l(i)])};var Q=i({setup(){const e=Ue();return{store:e,allLaws:g((()=>e.state.allLaws)),acceptedLaws:g((()=>{var t;return null==(t=e.state.game)?void 0:t.acceptedLaws}))}},data:()=>({opened:void 0}),computed:{accepted(){return this.allLaws.filter((e=>{var t;return null==(t=this.acceptedLaws)?void 0:t.some((t=>t.lawId===e.id))}))}},methods:{toggleOpen(e){this.opened=this.opened===e?void 0:e}}});const X=p()(((e,t,n,a,s,r)=>(u(!0),o(c,null,m(e.accepted,((t,n)=>(u(),o("div",{key:n,class:["Law",{opened:n===e.opened}],onClick:t=>e.toggleOpen(n)},[l("h3",null,b(t.title),1),l("div",null,b(t.description),1)],10,["onClick"])))),128))));Q.render=X,Q.__scopeId="data-v-87402bbe";var ee=i({setup(){const e=Ue();return{store:e,allLaws:g((()=>e.state.allLaws)),acceptedLaws:g((()=>{var t;return null==(t=e.state.game)?void 0:t.acceptedLaws}))}},data:()=>({declined:[]}),computed:{proposed(){return this.allLaws.filter((e=>{var t;return!(null==(t=this.acceptedLaws)?void 0:t.some((t=>t.lawId===e.id)))&&!this.declined.includes(e.id)})).slice(0,6)}},methods:{accept(e){this.store.dispatch($e(e))},decline(e){this.declined.push(e)}}});const te=p();h("data-v-54f052e4");const ne={class:"ProposedLaws"},ae={class:"button-bar"};v();const se=te(((e,t,n,a,s,r)=>(u(),o("div",ne,[(u(!0),o(c,null,m(e.proposed,((t,n)=>(u(),o("div",{key:n,class:"Law"},[l("h3",null,b(t.title),1),l("div",null,b(t.description),1),l("div",ae,[l("button",{class:"accept",onClick:n=>e.accept(t.id)},"✓",8,["onClick"]),l("button",{class:"decline",onClick:n=>e.decline(t.id)},"✗",8,["onClick"])])])))),128))]))));ee.render=se,ee.__scopeId="data-v-54f052e4";var re=i({components:{GameSetup:q,LawProposals:ee,AcceptedLaws:Q},setup:()=>({store:Ue()}),methods:{advanceYear(){this.$store.dispatch(Pe())}}});const ie=p();h("data-v-30db5640");const oe=l("h2",null,"Beschlossene Gesetze",-1),le=l("p",null,"Wenn Du fertig bist, wechsle zum nächsten Jahr und sieh' Dir die Auswirkungen an.",-1),ce={class:"button-bar"};v();const ue=ie(((e,t,n,a,s,r)=>{const i=d("LawProposals"),c=d("AcceptedLaws"),m=d("GameSetup");return u(),o(m,null,{default:ie((()=>[l(i),oe,l(c),le,l("div",ce,[l("button",{onClick:t[1]||(t[1]=(...t)=>e.advanceYear&&e.advanceYear(...t))},"Jahr abschließen")])])),_:1})}));re.render=ue,re.__scopeId="data-v-30db5640";var de=i({components:{GameSetup:q},methods:{newGame(){this.$router.push("/games")}}});const me=l("h2",null,"Deine erste Entscheidung steht bevor...",-1),pe=l("p",null,[y("Wähle weise, denn "),l("u",null,"alles hat Einfluss"),y(" auf deine Beliebtheit, das Klimaziel sowie den Finanzhaushalt.")],-1),he=l("p",null,[y(" Durch manche Entscheidungen entstehen neue Möglichkeiten."),l("br"),y(" Es kann aber auch sein, dass du dir durch bestimmte Entscheidungen andere Möglichkeiten nimmst. ")],-1),ve=y(" Gar nicht so einfach, Politiker zu sein, oder? "),ge={class:"button-bar"};de.render=function(e,t,n,a,s,r){const i=d("o"),c=d("GameSetup");return u(),o(c,null,{default:w((()=>[me,pe,he,l(i,null,{default:w((()=>[ve])),_:1}),l("div",ge,[l("button",{onClick:t[1]||(t[1]=(...t)=>e.newGame&&e.newGame(...t))},"Leg' los")])])),_:1})};var fe=i({methods:{start(){this.$router.push("/start")}}});const be={class:"wrapper"},we=l("h2",null,"Stell dir vor...",-1),ye=l("h3",null,"... du bist Politiker.",-1),Le=l("p",null," Du wurdest gerade ins Amt gewählt. Dein Ziel? Die Wiederwahl! ",-1),ke=l("p",null," Du hast vier Jahre Zeit um... ",-1),Ce=l("ul",null,[l("li",null,"Beliebtheit in der Bevölkerung zu erlangen"),l("li",null,"der Klimakatastrophe entgegenzusteuern"),l("li",null,"das Soll des Bundeshaushaltes zu erreichen/nicht zu übersteigen")],-1),Ie={class:"button-bar"};fe.render=function(e,t,n,a,s,r){return u(),o("div",be,[we,ye,Le,ke,Ce,l("div",Ie,[l("button",{onClick:t[1]||(t[1]=(...t)=>e.start&&e.start(...t))},"Starte das Spiel!")])])};const Ee=[{path:"/",component:fe},{path:"/start",component:de},{path:"/games",component:re,beforeEnter:()=>Re.dispatch(Me())},{path:"/games/:id",component:re,beforeEnter:e=>Re.dispatch(je(e.params.id))}],_e=L({history:k(),routes:Ee});let Se=0;function Ge(e){return r(r({},e),{id:""+ ++Se})}const De=[Ge({title:"Kohleverstromung einstellen",description:"Die Verstromung von Kohle zur Erzeugung von Strom wird verboten.",effects(e,t,n){const a=n-t;return{co2emmissions:-200,stateDebt:-(a<18?0:1e3),unemployment:Math.max(50*(10-a)/10,0)}}}),Ge({title:"Energiemix regelt der Markt",description:"Subventionen in der Energiewirtschaft werden insgesamt eingestellt.",effects:(e,t,n)=>({co2emmissions:-100,stateDebt:-1e3})}),Ge({title:"Kernenergienutzung verlängern",description:"Eigentlich bereits abgeschaltete Kernkraftwerke wieder in Betrieb nehmen und neue bauen.",effects:(e,t,n)=>({co2emmissions:-100,stateDebt:1e3})}),Ge({title:"Windkraft fördern",description:"Garantierte Einspeisevergütung für neue und erneuterte Windanlagen",effects:(e,t,n)=>({co2emmissions:-100,stateDebt:-1e3})})],Oe={loadGame(e){const t=localStorage.getItem("game");if(!t)throw Error("Game not found");return JSON.parse(t)},saveGame(e){localStorage.setItem("game",JSON.stringify(e))}};function Ye(e){return Oe.saveGame(e),(e=>Ke("gameLoaded",{game:e}))(e)}const ze={startGame(){const e={id:C(),currentYear:2021,values:r({},K),acceptedLaws:[]};Oe.saveGame(e),_e.push("/games/"+e.id)},loadGame(e,t){e.commit(Ye(Oe.loadGame(t.gameId)))},acceptLaw(e,t){const n=e.state.game,a={lawId:t.lawId,effectiveSince:n.currentYear+1};e.commit(Ye(r(r({},n),{acceptedLaws:[...n.acceptedLaws,a]})))},advanceYear(e){const t=e.state.game,n=t.acceptedLaws.map((function(e){const t=De.find((t=>t.id===e.lawId));if(t)return r(r({},t),{effectiveSince:e.effectiveSince});throw Error(`Law #${e.lawId} not found`)})),a=function(e,t,n){const a=r({},e);return t.forEach((t=>{const s=t.effects(e,t.effectiveSince,n);Object.keys(s).forEach((e=>{a[e]+=s[e]||0}))})),a.co2budget-=a.co2emissions,a}(t.values,n,t.currentYear+1);e.commit(Ye(r(r({},t),{values:a,currentYear:t.currentYear+1})))}},Me=()=>We("startGame",{}),je=e=>We("loadGame",{gameId:e}),$e=e=>We("acceptLaw",{lawId:e}),Pe=()=>We("advanceYear",{}),Ae={allLaws:De,game:void 0},Be=Symbol(),We=(e,t)=>r({type:e},t),Ke=(e,t)=>r({type:e},t),Re=I({state:Ae,mutations:O,actions:ze});function Ue(){return E(Be)}const Ve=_(S);Ve.use(Re,Be),Ve.use(_e),Ve.mount("#app");
